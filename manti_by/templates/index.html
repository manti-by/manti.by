{% extends 'base.html' %}

{% load static i18n thumbnail common_tags %}

{% block title %}{% trans 'Homepage' %}{% endblock %}
{% block meta %}{% trans 'Homepage' %}{% endblock %}

{% block content %}
  <div class="home container">
    <div class="featured posts">
      <h1>{% trans 'Featured' %}</h1>
      <div id="featured-slider" class="mobile-slider">
        <div class="flex content">
          {% for item in featured_posts %}
            {% include 'blog/featured.html' %}
          {% endfor %}
        </div>
        <div class="controls">
          <div class="prev button hidden">
            <i class="material-icons">chevron_left</i>
          </div>
          <ul>
            {% for item in featured_posts %}
              <li {% if forloop.first %}class="active"{% endif %}>&bullet;</li>
            {% endfor %}
          </ul>
          <div class="next button">
            <i class="material-icons">chevron_right</i>
          </div>
        </div>
      </div>
    </div>
    <div class="gallery">
      <h2>{% trans 'Latest Images' %}</h2>
      <div class="featured">
        {% if featured_image %}
          <a href="{% url 'gallery' %}">
            {% thumbnail featured_image.original_image "x1080" as preview %}
            {% thumbnail featured_image.original_image "x50" as thumb %}
            <img src="{% webp thumb %}" data-src="{% webp preview %}"
                 width="{{ preview.width }}" height="{{ preview.height }}"
                 alt="{% trans 'Popular image from gallery' %}" class="lazy">
            {% endthumbnail %}
            {% endthumbnail %}
          </a>
        {% else %}
          <a href="{% url 'gallery' %}">
            <img src="{% static 'img/featured.webp' %}"
                 alt="{% trans 'Popular image from gallery' %}"
                 title="{% trans 'Popular image from gallery' %}">
          </a>
        {% endif %}
        <div class="latest flex">
          {% for image in latest_images %}
            <a href="{% url 'gallery' %}" class="thumbnail">
              {% thumbnail image.original_image "100x100" crop="center" as thumb %}
              <img src="{% webp thumb %}" width="{{ thumb.width }}" height="{{ thumb.height }}"
                   alt="{% trans 'Popular image from gallery' %}">
              {% endthumbnail %}
            </a>
          {% endfor %}
        </div>
      </div>
    </div>
    <h2>{% trans 'Latest posts' %}</h2>
    <div class="main flex">
      <section class="posts">
        {% for item in latest_posts %}
          {% include 'blog/list-item.html' %}
        {% endfor %}
      </section>
      {% include 'common/sidebar.html' %}
    </div>
  </div>
{% endblock %}

{% block styles %}
  <link type="text/css" rel="stylesheet" href="{% static 'css/pages/index.css' %}" media="all">
  <link type="text/css" rel="stylesheet" href="{% static 'css/blog/list-item.css' %}" media="all">
  <link type="text/css" rel="stylesheet" href="{% static 'css/blog/featured.css' %}" media="all">
  <link type="text/css" rel="stylesheet" href="{% static 'css/components/slider.css' %}" media="all">
{% endblock %}

{% block scripts %}
  <script src="{% static 'js/widgets/tracklist.js' %}"></script>
  <script src="{% static 'js/widgets/slider.js' %}"></script>
{% endblock %}